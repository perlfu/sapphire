-*-outline-*-
These are the release notes for Jikes RVM 2.3.4.


*Sections of this document:
 *Highlights
 *Other Notes
 *Bug Fixes

*Highlights of this release include:
**We now run Eclipse 3.0
This requires that the Xalan XML parser be installed.

**The port to PowerPC64 is virtually complete.  There are a few fringe opt 
compiler bugs remaining, but functionality has advanced to the point where 
development and production images of Jikes RVM are passing almost all 
regression tests. 

**MMTk has been moved out of $RVM_ROOT/rvm/src/vm/memory managers to 
$RVM_ROOT/MMTk.  It has also been reorganized to have the directory structure
match its package structure and thus is "Eclipse-friendly."

**Major revision of the object model. All objects (arrays and scalars) 
are now layed out in a "forwards" direction. This simplifies and enables
many common GC techniques (scannable heap; card-marking) at the cost of a 
slight performance hit on AIX/PowerPC due to the need to make some null checks
explicit. See VM_ObjectModel.java for more details. 

**XML parsing with Xalan
Jikes RVM can now be configured so it always uses the Xalan XML
 parser.  See the configuration file variable XALAN_J_DIR.

**We have switched to GNU Classpath version 0.12.
Versions 0.10 and 0.11 can still be used, if you set appropriate
options in the configuration file, but we recommend Classpath 0.12.

**CPU hogging fixed
Jikes RVM used to busy-wait when it was idle, waiting for I/O or
timeouts.  It now sleeps properly, which is nice if you're trying
to do something else on your workstation at the same time that you're
using Jikes RVM.  This closes long-standing defect # 2046.

*Other notes:
**The memory size options now all take sizes in bytes by default.  (INCOMPATIBLE CHANGE)
They used to use a mix of default units: Megabytes (Mebibytes),
Kilobytes (Kibibytes), and "Log 2 of the frequency (in bytes)".  They
now all default to bytes; please update any scripts you have
appropriately.  This affects -Xmx, -Xms, and the -X:gc:* options. 

**The MMAP_COPY_ON_WRITE feature now works on PowerPC/Linux and PowerPC/OSX.  
(This feature was discussed in the 2.3.3 release notes.)

**The AttachCurrentThread JNI function is now partly implemented;
it now works in the common case where a thread is already attached to the VM.

**RVM_BOOTCLASSPATH_APPEND is a new environment variable that Jikes RVM
will recognize when booting.  You can use it to add extensions to the
VM.  Set it as you would set the CLASSPATH environment variable.

**Major re-implementation of AOS's feedback-directed inlining and the opt 
compiler's default inlining policy. Result is simpler code, lower
overhead profiling, and more effective inlining decisions. 

*Bug Fixes:
**The JNI AttachCurrentThread function now returns proper error status if it
cannot complete properly.  It used to (incorrectly) always return
JNI_OK.
**Class.getResourceAsStream() and Class.getResource() would fail 
with a NullPointerException when invoked on a Class object that was
loaded by the Bootstrap Class Loader. 
**Defect #3601 is fixed -- java.lang.Thread no longer inherits from VM_Thread.
**Stack trace printing for trouble in the boot thread is fixed; 
it no longer inappropriately elides frames.

*Internal Changes
**The VM_Magic classes have been moved to the org.vmmagic namespace, 
and rationalized. Further work on refactoring magic usage (mainly in Jikes 
RVM as opposed to MMTk) is ongoing.
