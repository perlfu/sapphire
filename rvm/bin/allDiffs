#!/bin/bash
#
# (C) Copyright IBM Corp. 2001
#
#$Id$
#
# @author Dave Grove
#
# Calls cvs diff on all Jikes RVM repositories
#

if [[ $RVM_HOST_CONFIG = "" ]]; then
   echo "$0: please set your RVM_HOST_CONFIG environment variable (eg. $HOME/rvm/config/i686-pc-linux.watson)"
   exit 1
fi

. $RVM_HOST_CONFIG

cd $RVM_ROOT
WORKING_DIRS="rvm MMTk"
SCRIPT=$RVM_ROOT/diffs.txt

touch $SCRIPT

for dir in $WORKING_DIRS; do
    if [[ -d $RVM_ROOT/$dir ]]; then 
	cd $RVM_ROOT/$dir
	echo >> $SCRIPT
	echo "******** Diffs for $dir ******** " >> $SCRIPT
	$CVS -q diff 2>> $SCRIPT >> $SCRIPT
    fi
done
