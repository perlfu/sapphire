#!/bin/ksh
#
# (C) Copyright IBM Corp. 2001
#
# Invoke Jikes RVM virtual machine that was created by "jbuild".
# See also: $RVM_ROOT/rvm/bin/jconfigure -help
# 04 Feb 2000 Derek Lieber
# 15 Jan 2001 Peter Sweeney eliminate dependence on option order.
#
# $Id$
#
ME=`basename $0`

# Place where RVM bootimage, booter, and runtime support files reside.
#
if [[ $RVM_BUILD = "" ]]; then
   print "$ME: please set your RVM_BUILD environment variable (eg. $HOME/rvmBuild)"
   exit 1
fi

if [[ X`uname` = X"CYGWIN_NT-5.0" ]]; then
  # need to kludge path to image because we use win32 api calls to mmap it.
  # other paths can be left in "unix" form; we use cygwin api calls for them.
  ARGS="-X:i=`cygpath -p -w $RVM_BUILD/RVM.image`"
  ARGS="$ARGS -X:vmClasses=`cygpath -p -w $RVM_BUILD/RVM.classes` -classpath ."
else
  ARGS="-X:i=$RVM_BUILD/RVM.image"
  ARGS="$ARGS -X:vmClasses=$RVM_BUILD/RVM.classes -classpath ."
fi
for arg in $*; do
   if   [[ $arg = --   ]]; then
     print "$ME: the command line option \"--\" is no longer used!"
   fi
done

typeset -x LIBPATH=$LIBPATH:$RVM_BUILD
typeset -x LD_LIBRARY_PATH=$LD_LIBRARY_PATH:$RVM_BUILD
exec $RVM_BUILD/JikesRVM $ARGS "$@"

