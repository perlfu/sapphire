This section provides some implementation details for the baseline
compiler. 

\subsection{General Architecture}
The goal of the baseline compiler is to efficiently generate code that
is ``obviously correct.'' It also needs to be easy to port to a new
platform and self contained (the entire baseline compiler must be
included in all Jikes RVM boot images to support dynamically loading
other compilers). 

Roughly 2/3 of the baseline compiler is machine-independent and
located in the {\tt src/vm/compilers/baseline} directory. The main file is
{\tt VM\_BaselineCompiler}. The main platform-dependent file (located
in {\tt src/vm/arch/\{\$arch\}/compilers/baseline} is {\tt VM\_Compiler}. 

Baseline compilation consists of two main steps: GC map computation
(discussed below) and code generation.  Code generation is
straightforward, consisting of a single pass through the
bytecodes of the method being compiled. {\tt VM\_BaselineCompiler}
contains the main code generation switch statement that invokes the
appropriate {\tt emit\_<bytecode>} method of {\tt VM\_Compiler}. 

\subsection{GC Maps}
The baseline compiler computes GC maps by abstractly interpreting the
bytecodes to determine which expression stack slots and local
variables contain references at the start of each bytecode. There are
additional compilations to handle {\tt JSR}s; see the source code for
details. This strategy of computing a single GC map that applies to
all the internal GC points for each bytecode slightly constrains code
generation. The code generator must ensure that the GC map remains
valid at all GC points (including implicit GC points introduced by
null pointer exceptions). It also forces the baseline compiler to
report reference parameters for the various {\tt invoke} bytecodes as
live in the GC map for the call (because the GC map also needs to
cover the various internal GC points that happen before the call is
actually performed). Note that this is not an issue for the optimizing
compiler which computes GC maps for each machine code instruction that
is a GC point. 

\subsection{Command-Line Options}

\index{baseline compiler command-line options}
\index{VM\_BaselineOptions}
\index{BooleanOptions.dat}
\index{ValueOptions.dat}
The command-line options to the baseline compiler are
stored as fields in an object of type {\tt VM\_BaselineOptions}; this
file is mechanically generated by the build process. 

To add or modify the command-line options in {\tt VM\_BaselineOptions.java},
you must modify either {\tt BooleanOptions.dat}, or {\tt ValueOptions.dat}.
You should describe your desired command-line option in a format 
described below in Section~\ref{section:cmdline}, which 
also provides the details for the optimizing compiler's command-line options.
Some options are common to both the baseline compiler and optimizing
compiler. They are defined by the {\tt SharedBooleanOptions.dat} and
{\tt SharedValueOptions.dat} files found in the
{\tt rvm/src/vm/compilers/utility} directory. 
