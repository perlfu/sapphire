#
# This file is part of Jikes RVM (http://jikesrvm.sourceforge.net).
# The Jikes RVM project is distributed under the Common Public License (CPL).
# A copy of the license is included in the distribution, and is also
# available at http://www.opensource.org/licenses/cpl1.0.php
#
# (C) Copyright IBM Corp. 2003
#
# $Id$
#
# @author Michael Hind
#

include		$(RVM_BUILD)/Make.rules.target

BENCH_NAME=ipsixql
include		$(JAL_ROOT)/testing/harness/Local.rules

BENCH_CLASS_PATH=$(BENCH_HOME)
BENCH_SOURCE_PATH=$(BENCH_HOME)
HEAPSIZE = 50
START_NAME=IpsixqlHarness
EXPECTED=ipsixql.expected

ifeq ($(MODE),PERFORMANCE)
  START_ARGS=1 7
  TIME_LIMIT = 600
else
  START_ARGS=1 1
  TIME_LIMIT = 300
endif

include		$(JAL_ROOT)/testing/harness/Make.rules

$(WORKING)/william.pdom:	$(WORKING)
	 cp -f $(BENCH_SOURCE_PATH)/william.pdom $(WORKING)/william.pdom

sanity: 	$(WORKING)/william.pdom sanity-check-rule

do-gather-performance:
	 @$(AWK) -f $(JAL_ROOT)/testing/harness/tests/ipsixql/perf.awk $(OUT) >> $(PERF_LOG)

check:
	@$(FGREP) "Normal completion" $(OUT) > /dev/null

